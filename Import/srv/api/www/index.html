<!DOCTYPE html>
<html>
  <head>
    <title>patISEnt</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="materialize/css/materialize.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
  </head>
  <body>
    <div id="home" class="container section pink lighten-4">
      <div class="row container section">
        <div class="col m12 s12">
          <img src="img/logo.gif" style="text-align: center;width:50%;margin: 0 auto;display: block;">
          <h1 class="header center pink-text text-darken-4">patISEnt</h1>
          <p class="red-text text-darken-4 center">patISEnt is a patient record importer for ISEmr. We have unified branding for all of our patient needs.</p>
        </div>
      </div>
    </div>
    <div id="form" class="container section purple lighten-2">
      <div class="row section container">
        <div class="col m12 s12">
          <h2 class="header center deep-purple-text text-darken-4">Demographics</h2>
        </div>
        <div class="col m12 s12">
          <form action="javascript:void(0);">
            <div class="form-group row">
              <label for="demographics-given-name" class="col-xs-2 col-form-label white-text">Given Name</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="Jake" id="demographics-given-name">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-family-name" class="col-xs-2 col-form-label white-text">Family Name</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="Drahos" id="demographics-family-name">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-birth-date" class="col-xs-2 col-form-label white-text">Birth Date</label>
              <div class="col-xs-10">
                <input class="form-control" type="date" placeholder="02/20/1995" id="demographics-birth-date">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-ssn" class="col-xs-2 col-form-label white-text">Social Security Number (SSN)</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="123-45-6789" pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}" id="demographics-ssn">
              </div>
            </div>
            <div><p><br><hr><br></p></div>
            <div class="form-group row">
              <label for="demographics-street-address-line" class="col-xs-2 col-form-label white-text">Street Address Line</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="1212 1st Street" id="demographics-street-address-line">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-city" class="col-xs-2 col-form-label white-text">City</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="Ames" id="demographics-city">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-state" class="col-xs-2 col-form-label white-text">State</label>
              <div class="col-xs-10">
                <input class="form-control" type="text" placeholder="IA" id="demographics-state">
              </div>
            </div>
            <div class="form-group row">
              <label for="demographics-postal-code" class="col-xs-2 col-form-label white-text">Postal Code</label>
              <div class="col-xs-10">
                <input class="form-control" type="number" placeholder="55011" pattern="[0-9]{5}" id="demographics-postal-code">
              </div>
            </div>
            <div><p><br><hr><br></p></div>
            <div class="form-group row">
              <label for="demographics-gender" class="col-xs-2 col-form-label white-text">Gender</label>
              <div class="col-xs-10">
                <select class="form-control" id="demographics-gender">
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select>
              </div>
            </div>
            <div><p><br><hr><br></p></div>
            <button type="button" class="btn btn-primary btn-lg btn-block" onclick="SolveWorldSickness()">Import Patient</button>
          </form>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="materialize/js/materialize.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script>
      data = {
        "name": {
          "given": "Testing",
          "family": "Account"
        },
        "address": {
          "streetAddressLine": "1212 1st Street",
          "city": "Ames",
          "state": "IA",
          "postalCode": "50011"
        },
        "gender": "Female",
        "birthTime": "1995-07-14",
        "ssn": "123-45-6789",
        "extension": {
          "username": "testingaccount95",
          "password": "ilovecats2"
        }
      }

      function FixDate(date) {
        date.split('/');
        return date[2] + "-" + date[1] + "-" + date[0];
      }

      function SolveWorldSickness() {
        data['name']['given'] = $('#demographics-given-name').val();
        data['name']['family'] = $('#demographics-family-name').val();
        data['address']['streetAddressLine'] = $('#demographics-street-address-line').val();
        data['address']['city'] = $('#demographics-city').val();
        data['address']['state'] = $('#demographics-state').val();
        data['address']['postalCode'] = $('#demographics-postal-code').val();
        data['gender'] = $('#demographics-gender').val();
        data['birthTime'] = $('#demographics-birth-date').val();
        data['ssn'] = $('#demographics-ssn').val();
        data['extension']['username'] = data['name']['given'].toLowerCase() + data['name']['given'].toLowerCase();
        data['extension']['password'] = data['name']['given'].toLowerCase() + data['name']['given'].toLowerCase();
        console.log(JSON.stringify(data));
        $.ajax({
          type: "POST",
          url: '/api/client',
          dataType: 'json',
          async: true,
          data: JSON.stringify(data),
          success: function(data) {alert("Thanks!"); console.log(data);},
          error: function(data) {alert("Unknown error occurred. Check console log?"); console.log(data); }
        });
      }
    </script>
  </body>
</htm>
